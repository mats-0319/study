# 头像生成

## 规则

1. 输入一个**字符串**和想要的图片**清晰度等级**
2. 根据输入字符串计算hash，根据hash计算图像使用的**颜色**，以及**在哪些位置显示色块**
3. 将上一步中的计算结果编码成图片格式，写成文件

## 结果

一张png图片，长宽比为1:1，左右对称，外围有一圈白边，可以方便剪裁为圆形而保留基本样式

图片主体为紧密排列的5*5方格，假设每一个小方格边长为`2a`，则外围的白边宽度为`a`

图片基础长宽像素数为`12*12`，用户输入的清晰度等级作为倍数，乘在基础像素上

示例图片：

![img](img/mario_4.png)
![img](img/Mario_4.png)
![img](img/mats9693_4.png)

## 使用

> 参考test代码

说明：
1. 代码直接将图片保存到`./img/`路径，如果你想要修改路径等设定，可以将`.go`文件复制到你的项目中

## 实现

1. 根据输入字符串计算hash
    1. hash函数：`sha256`
    2. 结果类型：十六进制字符串（长度：64）
2. `64 = 15 * 4 + 4`：将hash分为16组，前15组表示对应位置是否显示色块，最后一组值用来表示图像颜色
    1. 图片左右对称，15组信息用来表示左侧两列与中间列的方格是否显示色块
    2. 一个小方格显示色块的条件：该组数字为奇数
        1. 即每一组（4位）十六进制数中的最后一位若为奇数，则对应位置方格显示色块；否则，对应方格显示白块
        2. 每一组中的前三位数字实际上没有用到
    3. 色块的颜色：假设最后一组hash值为`0xabcd`，则色块颜色为：`RGBA(ab, bc, cd, da)`
3. 记录以上计算结果，使用`image`包编码图片信息，序列化，写入文件
