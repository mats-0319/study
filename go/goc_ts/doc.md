# Goc_ts

根据go语言定义的接口结构，生成http请求对应的ts相关代码

自用工具，泛用性低

## 使用

> 参考`goc_ts/sample/manual.md`

## 实现

工具可以根据go语言定义的接口，结合预设ts代码模板，生成相应的ts的http请求调用相关代码

生成的ts代码结构：

- axios配置初始化(`config.ts`)
- 工具函数(`utils.ts`)
- http请求的数据结构(`xxx.go.ts`)
- 以及http请求函数(`xxx.http.ts`)

生成规则:

- 根据代码模板和配置信息生成axios初始配置，主要包含ip和port
- 根据需要生成utils工具函数
    - ObjectToFormData：存在输入参数不为空的请求
- 读取并分析指定目录下的全部`.go`文件，根据分析结果，生成ts代码
    - 使用正则表达式匹配接口uri、接口输入输出参数、自定义结构类型
    - 记录匹配到的接口、结构体的关键信息，将其转换成ts的版本
    - 根据转换得到的ts关键信息和代码模板，生成ts的http请求调用代码

约定：

1. 使用`const URI_xxx=`定义接口uri
2. `type xxx struct {}`将被识别为自定义结构类型，
   其中结构体名称形如`xxxReq`/`xxxRes`的，将被识别为对应接口的输入/输出参数，
   每个定义的接口，其uri、接口输入输出参数名称要求一致。  
   同时，因为要求相关命名一致，我们提供有根据配置生成基础接口定义的功能，参考使用章节

## 优化

1. 根据配置自动生成基础的go接口定义文件（主要是为了保证URI、输入输出参数的名称一致）
2. 整理代码结构，过一遍命名，添加注释并补充文档
3. 添加枚举类型的支持
