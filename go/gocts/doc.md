# Gocts

根据go语言定义的接口结构，生成相应的ts发送http请求的代码

（ts需要axios包的支持）

## 安装

`go install github.com/mats9693/study/go/gocts`

## 使用

> 参考`gocts/sample/manual.md`

## 目录

- data: 生成器结构定义（生成器：保存go代码解析结果并据此生成ts代码的结构）
- generate_ts: 根据生成器生成ts代码
- initialize: 初始化功能，包含`-i`/`-g`等启动参数的功能实现
- parse: 解析go代码
- sample: 使用示例
- test: 测试
- utils: 工具库

## 约定

- 使用`const URI_xxx=`定义接口uri
- `type xxx struct {}`将被识别为自定义结构类型，
  其中结构体名称形如`xxxReq`/`xxxRes`的，将被识别为对应接口的输入/输出参数，
  每个定义的接口，其uri、接口输入输出参数名称要求一致。
- 要求go结构体的每一个字段都有`json tag`
- 要求枚举结构：需要有一个具名的类型或类型别名，枚举的每一个值都要以这个名字+下划线开头

有这些约定是因为我们将会按照约定的格式来解析go代码，相应的，因为对格式作出了要求，我们也提供相应的代码生成工具（详见使用示例）

## 实现

todo

## 开发计划

todo

## 设计说明

- `.http.ts`文件中，如果一个参数是自定义类型，是保留其自定义类型，还是将其展开成多个字段？  
  我们选择保留其自定义类型，因为一个请求的输入参数是结构体，
  常见情况是分页信息（包含页数和每页记录数）或创建请求的对象（例如创建一个用户，可能包含用户名、密码等）
  而这些情况其实都不适合展开字段：分页信息可以写一个通用的默认分页；
  而`传递一个想要创建的用户`应用场景中，把所有需要的参数写成结构体本身更有利于代码阅读。
