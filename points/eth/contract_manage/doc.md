# 合约管理工具

## 目的

能够在本地部署合约、修改和查看合约参数

## 结构

- 使用go在本地挂一个web服务，主要业务由web完成
- web服务通过wallet connect连接到钱包，由js构造交易、用户在钱包上签名并发送交易

## 安全

最终提供给运营的，是一个压缩包，里面包含一个二进制可执行文件、使用手册与web代码，拟通过工作邮箱发送

虽然源代码在该项目下，但因为提供的是打包之后的程序，所以还应该有校验：sha3.txt，里面包含二进制程序和web代码的sha3值，再写一个如何验证sha3的文档

服务暂时仅支持windows系统，如果有其他系统的需求，请联系我

最终的文件结构：

- dist（文件夹，包含web代码）
- contract_manage.exe
- manual.txt
- 如何验证文件的正确性.txt
- sha3.txt（可能需要写一个脚本来生成这个文件）

早期版本仅包含前面三项，hash验证拟于后续版本添加

## 设计

go程序会监听一个本地端口，并为该端口的访问，返回web代码

web代码设计：

1. 顶部栏展示连接钱包信息，只支持wallet connect连接方式，仅连接钱包后，可访问其他功能
    1. 顶部栏展示信息：地址、链ID
    2. 顶部栏右侧展示项目更新时间
2. 内容区域分为左右两部分，用户可以在左侧选择功能，在右侧执行功能
3. 左侧设计：
    1. 一级标题为合约名称，二级标题固定为**部署**、**设置**和**查看**
4. 右侧设计：
    1. 部署：展示合约字节码及其更新时间，提供部署按钮
    2. 设置：列举所有写操作的合约函数名称（无view或pure标识），可以展开，展开后可以填写参数，填写完成后可以构造交易、发送给钱包（参考remix）
        1. 为什么不用remix呢？因为remix不能使用自己的地址
        2. 交易成功后，展示交易hash，因为合约可以部署到不同的链上，所以不提供**点击hash跳转到etherscan**功能
    3. 查看：列举所有读操作的合约函数名称（有view或pure标识），操作方法同上
        1. 查看函数可以拿到返回值，尝试解析返回值，不行就原样展示

tips:

1. 工具仅提供管理功能，不提供常规业务调用功能
    1. 举例来说，eth合约，提供**新增操作员**等方法的调用，但不提供**充值**等方法的调用
